<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATS Dashboard</title>
    <link rel="stylesheet" href="style.css"> <!-- Link to your CSS file -->
</head>
<body>
    <!-- Notification Bar -->
    <div id="notification-bar"></div>

    <!-- 🌐 Language Switch with Flags -->
    <div class="language-switch">
        <img src="https://flagcdn.com/w20/us.png" onclick="switchLanguage('en')" alt="EN">
        <img src="https://flagcdn.com/w20/kh.png" onclick="switchLanguage('km')" alt="KH">
    </div>

    <!-- 🔐 Login Section -->
    <div id="login-page">
        <h2 data-en="Login to ATS" data-km="ចូលទៅកាន់ ATS">Login to ATS</h2>
        <input type="text" id="username" placeholder="Username" />
        <input type="password" id="password" placeholder="Password" />
        <button onclick="login()" data-en="Login" data-km="ចូល">Login</button>
        <p id="loginMessage" style="color: #ef4444; margin-top: 1rem;"></p>
    </div>

    <!-- 📊 Dashboard -->
    <div id="dashboard" style="display:none;">
        <h1 data-en="ATS Dashboard" data-km="ផ្ទាំង ATS">ATS Dashboard</h1>
        <p id="connection" data-en="Connecting..." data-km="កំពុងតភ្ជាប់...">Connecting...</p>
        <p id="lastUpdate" data-en="Last update: --" data-km="ពេលវេលាធ្វើបច្ចុប្បន្នភាពចុងក្រោយ: --">Last update: --</p>
        <p id="userIdDisplay" style="font-size: 0.875rem; color: #d1d5db; margin-bottom: 1rem;"></p> <!-- Display user ID -->

        <!-- 🟢 Two Blocks per Row -->
        <div class="grid-2">
            <!-- This card now displays Voltage, and keeps the .power styling -->
            <div class="card power">
                <h3 data-en="Voltage" data-km="វ៉ុល">Voltage</h3>
                <p id="voltage">--</p>
            </div>

            <!-- This card now displays Power Source, and keeps the .voltage styling -->
            <div class="card voltage">
                <h3 data-en="Power Source" data-km="ប្រភពថាមពល">Power Source</h3>
                <p id="status">--</p>
            </div>

            <div class="card backup">
                <h3 data-en="Backup Status" data-km="ស្ថានភាពថាមពលបម្រុង">Backup</h3>
                <p id="backup">--</p>
            </div>

            <div class="card alarm">
                <h3 data-en="Alarm" data-km="សញ្ញាព្រមាន">Alarm</h3>
                <p id="alarm">--</p>
            </div>

            <div class="card control">
                <h3 data-en="Generator Control" data-km="គ្រប់គ្រងម៉ាស៊ីនភ្លើង">Generator Control</h3>
                <button id="genBtn" onclick="toggleGenerator()"
                        data-en="Start Generator" data-km="ចាប់ផ្តើមម៉ាស៊ីនភ្លើង"
                        data-en-start="Start Generator" data-km-start="ចាប់ផ្តើមម៉ាស៊ីនភ្លើង"
                        data-en-stop="Stop Generator" data-km-stop="បញ្ឈប់ម៉ាស៊ីនភ្លើង">
                    Start Generator
                </button>
                <p id="generatorStatus" class="text-sm mt-2" style="color: #3c2300;"></p>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script> <!-- MQTT library -->
    <script type="module" src="script.js"></script> <!-- Link to your JavaScript file -->
</body>
</html>
