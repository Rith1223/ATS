<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATS Dashboard</title>
    <link rel="stylesheet" href="style.css"> <!-- Link to your CSS file -->
</head>
<body>
    <!-- Notification Bar -->
    <div id="notification-bar"></div>

    <!-- ðŸŒ Language Switch with Flags -->
    <div class="language-switch">
        <img src="https://flagcdn.com/w20/us.png" onclick="switchLanguage('en')" alt="EN">
        <img src="https://flagcdn.com/w20/kh.png" onclick="switchLanguage('km')" alt="KH">
    </div>

    <!-- ðŸ” Login Section -->
    <div id="login-page">
        <h2 data-en="Login to ATS" data-km="áž…áž¼áž›áž‘áŸ…áž€áž¶áž“áŸ‹ ATS">Login to ATS</h2>
        <input type="text" id="username" placeholder="Username" />
        <input type="password" id="password" placeholder="Password" />
        <button onclick="login()" data-en="Login" data-km="áž…áž¼áž›">Login</button>
        <p id="loginMessage" style="color: #ef4444; margin-top: 1rem;"></p>
    </div>

    <!-- ðŸ“Š Dashboard -->
    <div id="dashboard" style="display:none;">
        <h1 data-en="ATS Dashboard" data-km="áž•áŸ’áž‘áž¶áŸ†áž„ ATS">ATS Dashboard</h1>
        <p id="connection" data-en="Connecting..." data-km="áž€áŸ†áž–áž»áž„ážáž—áŸ’áž‡áž¶áž”áŸ‹...">Connecting...</p>
        <p id="lastUpdate" data-en="Last update: --" data-km="áž–áŸáž›ážœáŸáž›áž¶áž’áŸ’ážœáž¾áž”áž…áŸ’áž…áž»áž”áŸ’áž”áž“áŸ’áž“áž—áž¶áž–áž…áž»áž„áž€áŸ’ážšáŸ„áž™: --">Last update: --</p>
        <p id="userIdDisplay" style="font-size: 0.875rem; color: #d1d5db; margin-bottom: 1rem;"></p> <!-- Display user ID -->

        <!-- ðŸŸ¢ Two Blocks per Row -->
        <div class="grid-2">
            <!-- This card now displays Voltage, and keeps the .power styling -->
            <div class="card power">
                <h3 data-en="Voltage" data-km="ážœáŸ‰áž»áž›">Voltage</h3>
                <p id="voltage">--</p>
            </div>

            <!-- This card now displays Power Source, and keeps the .voltage styling -->
            <div class="card voltage">
                <h3 data-en="Power Source" data-km="áž”áŸ’ážšáž—áž–ážáž¶áž˜áž–áž›">Power Source</h3>
                <p id="status">--</p>
            </div>

            <div class="card backup">
                <h3 data-en="Backup Status" data-km="ážŸáŸ’ážáž¶áž“áž—áž¶áž–ážáž¶áž˜áž–áž›áž”áž˜áŸ’ážšáž»áž„">Backup</h3>
                <p id="backup">--</p>
            </div>

            <div class="card alarm">
                <h3 data-en="Alarm" data-km="ážŸáž‰áŸ’áž‰áž¶áž–áŸ’ážšáž˜áž¶áž“">Alarm</h3>
                <p id="alarm">--</p>
            </div>

            <div class="card control">
                <h3 data-en="Generator Control" data-km="áž‚áŸ’ážšáž”áŸ‹áž‚áŸ’ážšáž„áž˜áŸ‰áž¶ážŸáŸŠáž¸áž“áž—áŸ’áž›áž¾áž„">Generator Control</h3>
                <button id="genBtn" onclick="toggleGenerator()"
                        data-en="Start Generator" data-km="áž…áž¶áž”áŸ‹áž•áŸ’ážáž¾áž˜áž˜áŸ‰áž¶ážŸáŸŠáž¸áž“áž—áŸ’áž›áž¾áž„"
                        data-en-start="Start Generator" data-km-start="áž…áž¶áž”áŸ‹áž•áŸ’ážáž¾áž˜áž˜áŸ‰áž¶ážŸáŸŠáž¸áž“áž—áŸ’áž›áž¾áž„"
                        data-en-stop="Stop Generator" data-km-stop="áž”áž‰áŸ’ážˆáž”áŸ‹áž˜áŸ‰áž¶ážŸáŸŠáž¸áž“áž—áŸ’áž›áž¾áž„">
                    Start Generator
                </button>
                <p id="generatorStatus" class="text-sm mt-2" style="color: #3c2300;"></p>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script> <!-- MQTT library -->
    <script type="module" src="script.js"></script> <!-- Link to your JavaScript file -->
</body>
</html>
